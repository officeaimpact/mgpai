"""
Tourvisor API Constants (Auto-Generated)
=========================================

ВНИМАНИЕ: Этот файл генерируется автоматически!
Не редактируйте его вручную — изменения будут перезаписаны.

Последняя синхронизация: 2026-01-19 14:07:49
Количество стран: 74
Количество городов вылета: 78
Количество услуг отелей: 31

Для обновления запустите:
    python scripts/sync_tourvisor_data.py
"""
from __future__ import annotations

# Время последней синхронизации
LAST_SYNC = "2026-01-19T14:07:49.048027"

# ==================== СТРАНЫ ====================
# Формат: {"название_lowercase": id}
# Поиск: COUNTRIES.get("египет") -> 1

COUNTRIES: dict[str, int] = {
    # ID=1: Египет
    "египет": 1,
    # ID=2: Таиланд
    "таиланд": 2,
    # ID=3: Индия
    "индия": 3,
    # ID=4: Турция
    "турция": 4,
    # ID=5: Тунис
    "тунис": 5,
    # ID=6: Греция
    "греция": 6,
    # ID=7: Индонезия
    "индонезия": 7,
    # ID=8: Мальдивы
    "мальдивы": 8,
    # ID=9: Оаэ
    "оаэ": 9,
    # ID=10: Куба
    "куба": 10,
    # ID=11: Доминикана
    "доминикана": 11,
    # ID=12: Шри-Ланка
    "шри-ланка": 12,
    # ID=13: Китай
    "китай": 13,
    # ID=14: Испания
    "испания": 14,
    # ID=15: Кипр
    "кипр": 15,
    # ID=16: Вьетнам
    "вьетнам": 16,
    # ID=17: Андорра
    "андорра": 17,
    # ID=18: Мексика
    "мексика": 18,
    # ID=19: Чехия
    "чехия": 19,
    # ID=20: Болгария
    "болгария": 20,
    # ID=21: Черногория
    "черногория": 21,
    # ID=22: Хорватия
    "хорватия": 22,
    # ID=23: Марокко
    "марокко": 23,
    # ID=24: Италия
    "италия": 24,
    # ID=25: Сингапур
    "сингапур": 25,
    # ID=26: Филиппины
    "филиппины": 26,
    # ID=27: Маврикий
    "маврикий": 27,
    # ID=28: Сейшелы
    "сейшелы": 28,
    # ID=29: Иордания
    "иордания": 29,
    # ID=30: Израиль
    "израиль": 30,
    # ID=31: Австрия
    "австрия": 31,
    # ID=32: Франция
    "франция": 32,
    # ID=33: Ямайка
    "ямайка": 33,
    # ID=34: Финляндия
    "финляндия": 34,
    # ID=35: Португалия
    "португалия": 35,
    # ID=36: Малайзия
    "малайзия": 36,
    # ID=37: Венгрия
    "венгрия": 37,
    # ID=38: Германия
    "германия": 38,
    # ID=39: Бразилия
    "бразилия": 39,
    # ID=40: Камбоджа
    "камбоджа": 40,
    # ID=41: Танзания
    "танзания": 41,
    # ID=42: Словакия
    "словакия": 42,
    # ID=43: Словения
    "словения": 43,
    # ID=44: Великобритания
    "великобритания": 44,
    # ID=46: Абхазия
    "абхазия": 46,
    # ID=47: Россия
    "россия": 47,
    # ID=49: Япония
    "япония": 49,
    # ID=50: Мальта
    "мальта": 50,
    # ID=51: Кения
    "кения": 51,
    # ID=52: Швейцария
    "швейцария": 52,
    # ID=53: Армения
    "армения": 53,
    # ID=54: Грузия
    "грузия": 54,
    # ID=55: Азербайджан
    "азербайджан": 55,
    # ID=56: Узбекистан
    "узбекистан": 56,
    # ID=57: Беларусь
    "беларусь": 57,
    # ID=58: Сербия
    "сербия": 58,
    # ID=59: Бахрейн
    "бахрейн": 59,
    # ID=60: Киргизия
    "киргизия": 60,
    # ID=64: Оман
    "оман": 64,
    # ID=65: Польша
    "польша": 65,
    # ID=67: Фиджи
    "фиджи": 67,
    # ID=69: Эстония
    "эстония": 69,
    # ID=70: Южная Корея
    "южная корея": 70,
    # ID=71: Албания
    "албания": 71,
    # ID=72: Аруба
    "аруба": 72,
    # ID=78: Казахстан
    "казахстан": 78,
    # ID=79: Катар
    "катар": 79,
    # ID=80: Ливан
    "ливан": 80,
    # ID=81: Мьянма
    "мьянма": 81,
    # ID=82: Непал
    "непал": 82,
    # ID=87: Панама
    "панама": 87,
    # ID=88: Аргентина
    "аргентина": 88,
    # ID=90: Венесуэла
    "венесуэла": 90,
    # ID=93: Саудовская Аравия
    "саудовская аравия": 93,
}

# ==================== ГОРОДА ВЫЛЕТА ====================
# Формат: {"название_lowercase": id}
# Поиск: DEPARTURES.get("москва") -> 1

DEPARTURES: dict[str, int] = {
    # ID=1: Мск
    "москва": 1,
    "мск": 1,
    # ID=2: Пермь
    "пермь": 2,
    # ID=3: Екб
    "екатеринбург": 3,
    "екб": 3,
    # ID=4: Уфа
    "уфа": 4,
    # ID=5: С.Петербург
    "с.петербург": 5,
    # ID=6: Челябинск
    "челябинск": 6,
    # ID=7: Самара
    "самара": 7,
    # ID=8: Н.Новгород
    "н.новгород": 8,
    # ID=9: Новосиб
    "новосиб": 9,
    "новосибирск": 9,
    # ID=10: Казань
    "казань": 10,
    # ID=11: Краснодар
    "краснодар": 11,
    # ID=12: Красноярск
    "красноярск": 12,
    # ID=13: Сургут
    "сургут": 13,
    # ID=14: Тюмень
    "тюмень": 14,
    # ID=15: Кемерово
    "кемерово": 15,
    # ID=16: Новокузнецк
    "новокузнецк": 16,
    # ID=17: Калининград
    "калининград": 17,
    # ID=18: Ростов
    "ростов": 18,
    "ростов-на-дону": 18,
    # ID=19: Нижнекамск
    "нижнекамск": 19,
    # ID=20: Хабаровск
    "хабаровск": 20,
    # ID=21: Омск
    "омск": 21,
    # ID=22: Иркутск
    "иркутск": 22,
    # ID=23: Владивосток
    "владивосток": 23,
    # ID=24: Ю.Сахалинск
    "ю.сахалинск": 24,
    # ID=25: Барнаул
    "барнаул": 25,
    # ID=26: Воронеж
    "воронеж": 26,
    # ID=27: Волгоград
    "волгоград": 27,
    # ID=28: Оренбург
    "оренбург": 28,
    # ID=29: Архангельск
    "архангельск": 29,
    # ID=30: Мурманск
    "мурманск": 30,
    # ID=31: Саратов
    "саратов": 31,
    # ID=32: Белгород
    "белгород": 32,
    # ID=34: Нижневартовск
    "нижневартовск": 34,
    # ID=35: Ханты-Мансийск
    "ханты-мансийск": 35,
    # ID=36: Благовещенск
    "благовещенск": 36,
    # ID=37: Якутск
    "якутск": 37,
    # ID=38: Брянск
    "брянск": 38,
    # ID=39: Мин.Воды
    "мин.воды": 39,
    # ID=40: Астрахань
    "астрахань": 40,
    # ID=41: Сыктывкар
    "сыктывкар": 41,
    # ID=42: Улан-Удэ
    "улан-удэ": 42,
    # ID=43: П.Камчатский
    "п.камчатский": 43,
    # ID=44: Чита
    "чита": 44,
    # ID=45: Братск
    "братск": 45,
    # ID=46: Владикавказ
    "владикавказ": 46,
    # ID=47: Курск
    "курск": 47,
    # ID=48: Магнитогорск
    "магнитогорск": 48,
    # ID=49: Орск
    "орск": 49,
    # ID=50: Ульяновск
    "ульяновск": 50,
    # ID=51: Чебоксары
    "чебоксары": 51,
    # ID=52: Томск
    "томск": 52,
    # ID=53: Абакан
    "абакан": 53,
    # ID=54: Нальчик
    "нальчик": 54,
    # ID=55: Ставрополь
    "ставрополь": 55,
    # ID=56: Сочи
    "сочи": 56,
    # ID=61: Наб.Челны
    "наб.челны": 61,
    # ID=62: Симферополь
    "симферополь": 62,
    # ID=63: Анапа
    "анапа": 63,
    # ID=64: Ижевск
    "ижевск": 64,
    # ID=65: Пенза
    "пенза": 65,
    # ID=67: Новый Уренгой
    "новый уренгой": 67,
    # ID=85: Ярославль
    "ярославль": 85,
    # ID=94: Махачкала
    "махачкала": 94,
    # ID=95: Калуга
    "калуга": 95,
    # ID=96: Грозный
    "грозный": 96,
    # ID=99: Без Перелета
    "без перелета": 99,
    # ID=101: Саранск
    "саранск": 101,
    # ID=102: Череповец
    "череповец": 102,
    # ID=103: Иваново
    "иваново": 103,
    # ID=104: Киров
    "киров": 104,
    # ID=115: Липецк
    "липецк": 115,
    # ID=116: Геленджик
    "геленджик": 116,
    # ID=117: Петрозаводск
    "петрозаводск": 117,
    # ID=118: Псков
    "псков": 118,
    # ID=119: Курган
    "курган": 119,
    # ID=123: Ноябрьск
    "ноябрьск": 123,
    # ID=124: Горно-Алтайск
    "горно-алтайск": 124,
    # ID=131: Элиста
    "элиста": 131,
}

# ==================== УСЛУГИ ОТЕЛЕЙ (SERVICES) ====================
# Формат: {"название_lowercase": id}
# Используется для параметра services в search.php

SERVICES: dict[str, int] = {
    "водные горки для детей": 1,
    "детское меню": 2,
    "мини-клуб": 3,
    "детская анимация": 4,
    "детская площадка": 6,
    "кухня": 7,
    "балкон": 8,
    "wi-fi в номере": 10,
    "кондиционер": 12,
    "можно с животными": 14,
    "первая линия": 15,
    "свой пляж": 16,
    "песчаный пляж": 17,
    "галечный пляж": 18,
    "бассейн": 23,
    "бассейн с подогревом": 24,
    "водные горки": 25,
    "spa": 26,
    "ресторан или кафе": 27,
    "спортзал": 28,
    "теннис": 30,
    "футбол": 31,
    "анимация": 33,
    "дискотека": 34,
    "wi-fi": 36,
    "одиноким мужчинам": 39,
    "семейный": 44,
    "vip": 45,
    "гарантия мест": 46,
    "только для взрослых": 48,
    "новый отель": 49,
}

# ==================== МАППИНГ УСЛУГ (USER TEXT -> SERVICE ID) ====================
# Маппинг пользовательских запросов в ID услуг Tourvisor
# Пример: "хочу песчаный пляж" -> SERVICES_MAPPING["песчаный пляж"] -> [id1, id2]

SERVICES_MAPPING: dict[str, list[int]] = {
    # Тип пляжа
    "песчаный пляж": [],  # Заполняется после синхронизации
    "песок": [],
    "галечный пляж": [],
    "галька": [],
    # Расположение
    "1-я линия": [],
    "первая линия": [],
    "на берегу": [],
    "у моря": [],
    # Развлечения
    "аквапарк": [],
    "горки": [],
    "водные горки": [],
    # Для детей
    "детский клуб": [],
    "анимация": [],
    "для детей": [],
    # SPA и отдых
    "спа": [],
    "spa": [],
    "бассейн": [],
    "подогреваемый бассейн": [],
}

# ==================== ТИПЫ ОТЕЛЕЙ (HOTEL TYPES) ====================
# Параметр hoteltypes для search.php
# Значения: active, relax, family, health, city, beach, deluxe

HOTEL_TYPES: dict[str, str] = {
    # Семейный отдых
    "семейный": "family",
    "для семьи": "family",
    "с детьми": "family",
    "детский": "family",
    # VIP / Люкс
    "vip": "deluxe",
    "вип": "deluxe",
    "люкс": "deluxe",
    "премиум": "deluxe",
    "роскошный": "deluxe",
    # Пляжный
    "пляжный": "beach",
    "на пляже": "beach",
    "у моря": "beach",
    # Городской
    "городской": "city",
    "в городе": "city",
    # Активный отдых
    "активный": "active",
    "спортивный": "active",
    "для активных": "active",
    # Спокойный отдых
    "спокойный": "relax",
    "релакс": "relax",
    "тихий": "relax",
    # Оздоровительный
    "оздоровительный": "health",
    "лечебный": "health",
    "санаторий": "health",
}

# ==================== ТИПЫ ТУРОВ (TOUR TYPES) ====================
# Параметр tourtype для search.php

TOUR_TYPES: dict[str, int] = {
    "любой": 0,
    "пляжный": 1,
    "горнолыжный": 2,
    "экскурсионный": 3,
    # Алиасы
    "пляж": 1,
    "море": 1,
    "лыжи": 2,
    "горы": 2,
    "экскурсии": 3,
    "экскурсия": 3,
}


# ==================== HELPER FUNCTIONS ====================

from typing import Optional


def get_country_id(name: str) -> Optional[int]:
    """Получить ID страны по названию."""
    if not name:
        return None
    return COUNTRIES.get(name.lower().strip())


def get_departure_id(name: str) -> Optional[int]:
    """Получить ID города вылета по названию."""
    if not name:
        return None
    return DEPARTURES.get(name.lower().strip())


def get_country_name(country_id: int) -> Optional[str]:
    """Получить название страны по ID."""
    for name, cid in COUNTRIES.items():
        if cid == country_id and any(ord(c) > 127 for c in name):
            return name.title()
    return None


def get_departure_name(departure_id: int) -> Optional[str]:
    """Получить название города вылета по ID."""
    for name, did in DEPARTURES.items():
        if did == departure_id and any(ord(c) > 127 for c in name):
            return name.title()
    return None


def get_service_ids(user_text: str) -> list[int]:
    """
    Извлечь ID услуг из пользовательского текста.
    
    Пример: "хочу отель с аквапарком и песчаным пляжем"
    -> возвращает список ID услуг для параметра services
    """
    if not user_text:
        return []
    
    text_lower = user_text.lower()
    service_ids = set()
    
    # Ищем совпадения в SERVICES
    for service_name, sid in SERVICES.items():
        if service_name in text_lower:
            service_ids.add(sid)
    
    # Ищем в маппинге
    for keyword, ids in SERVICES_MAPPING.items():
        if keyword in text_lower and ids:
            service_ids.update(ids)
    
    return list(service_ids)


def get_hotel_types(user_text: str) -> list[str]:
    """
    Извлечь типы отелей из пользовательского текста.
    
    Пример: "семейный отель на пляже"
    -> возвращает ["family", "beach"]
    """
    if not user_text:
        return []
    
    text_lower = user_text.lower()
    hotel_types = set()
    
    for keyword, htype in HOTEL_TYPES.items():
        if keyword in text_lower:
            hotel_types.add(htype)
    
    return list(hotel_types)


def get_tour_type(user_text: str) -> Optional[int]:
    """
    Определить тип тура из пользовательского текста.
    
    Пример: "горнолыжный курорт" -> 2
    """
    if not user_text:
        return None
    
    text_lower = user_text.lower()
    
    for keyword, ttype in TOUR_TYPES.items():
        if keyword in text_lower:
            return ttype
    
    return None