# TourVisor API - Правила работы

## Когда применять

Это правило применяется при:
- Работе с TourVisor API
- Интеграции поиска туров
- Работе с данными туроператоров
- Любых задачах, связанных с туристическим функционалом проекта

## Обязательные действия

### 1. Всегда сверяйся с документацией

Перед написанием кода для работы с TourVisor API **обязательно** прочитай соответствующий файл документации:

- **Поиск туров** → `Tourvisour_documentation/1. XML - поиск туров/1. Поиск туров.md`
- **Справочники** → `Tourvisour_documentation/1. XML - поиск туров/2. Справочники.md`
- **Актуализация** → `Tourvisour_documentation/1. XML - поиск туров/3. Актуализация.md`
- **Детальная актуализация** → `Tourvisour_documentation/1. XML - поиск туров/4. Актуализация детальная.md`
- **Описания отелей** → `Tourvisour_documentation/2. XML - описания/1. Описания отелей.md`
- **Горящие туры** → `Tourvisour_documentation/3. XML - горящие туры/1. Горящие туры.md`

Общий обзор API: `Tourvisour_documentation/README.md`

### 2. Проверяй параметры

Документация содержит **точные названия параметров** и их допустимые значения. Не угадывай - сверяйся с документацией.

### 3. Учитывай особенности API

- **tourid** имеет ограниченный срок действия - не храни его долго
- **IP-привязка** - результаты поиска доступны только с того же IP
- **Лимиты запросов** - следи за количеством запросов актуализации
- **request=2** в актуализации - чтобы не расходовать лимит

### 4. Формат ответа

API поддерживает XML и JSON. Используй `format=json` для удобства работы в Python/JavaScript.

## Типичные ошибки

1. Неправильное название параметра (например, `date_from` вместо `datefrom`)
2. Использование устаревшего `tourid`
3. Слишком частые запросы актуализации без `request=2`
4. Запрос результатов поиска раньше чем через 3-5 секунд

## Пример правильного подхода

```python
# ПРАВИЛЬНО: сначала читаем документацию
# См. Tourvisour_documentation/1. XML - поиск туров/1. Поиск туров.md

# Параметры из документации:
params = {
    "authlogin": "...",
    "authpass": "...",
    "departure": 1,      # код города вылета
    "country": 1,        # код страны
    "datefrom": "15.02.2024",  # формат дд.мм.гггг
    "dateto": "21.02.2024",
    "nightsfrom": 7,
    "nightsto": 10,
    "adults": 2,
    "format": "json"
}
```
