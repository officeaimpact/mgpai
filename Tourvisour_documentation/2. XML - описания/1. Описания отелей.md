# XML шлюз TOURVISOR

## ОПИСАНИЯ ОТЕЛЕЙ

Сервис получения информации по отелям – детального описания и списка фотографий. Позволяет получать информацию в формате XML либо JSON, тем самым возможно реализовать полностью индивидуальное оформление карточки (описания) отеля.

Получение информации по отелям осуществляется путем GET-запроса на адрес:

```
http://tourvisor.ru/xml/hotel.php
```

Результаты выдаются в кодировке **UTF-8 (Unicode)**.

---

## 1. Авторизация

При работе со шлюзом требуется авторизация. Для этого используется логин и пароль от личного кабинета TourVisor.ru.

**Параметры авторизации:**

| Параметр | Описание |
|----------|----------|
| `authlogin` | логин в системе TourVisor |
| `authpass` | пароль в системе TourVisor |

**Пример:**

```
http://tourvisor.ru/xml/hotel.php?format=xml&hotelcode=104&authlogin=testsite&authpass=123123
```

---

## 2. Основные параметры

| Параметр | Описание |
|----------|----------|
| `format` | формат выдачи xml или json (по умолчанию json) |
| `hotelcode` | код отеля (можно получить из результатов поиска или из справочника отелей). **Указывается обязательно!** |

---

## 3. Дополнительные параметры

| Параметр | Описание |
|----------|----------|
| `imgbig` | если равно 1, то выдаются фотографии шириной 800 пикс (если есть), либо 400 пикс. Если равно 0, то выдаются фотографии 400 пикс (старая схема). |
| `removetags` | убирать HTML теги из списков. По умолчанию списки (например, список услуг в отеле) передаются с HTML тегами, которые формируют список (LI). Если задать параметр `removetags=1`, то вместо HTML тегов элементы списка разделяются просто точкой с запятой. |
| `reviews` | если этот параметр = 1, то в выдачу включаются также отзывы по отелю (при их наличии). Подробнее см.пункт 6 данной документации. |

---

## 4. Описание отеля

В ответе на запрос передается доступная информация по отелю, а также список ссылок на фотографии отеля. Ниже перечислены возможные поля, которые содержат информацию.

> **Обратите внимание, что** описания отелей разнородны, поэтому далеко не все поля могут быть заполнены. Передаются только те поля, в которых содержится информация.

### Основные поля

| Поле | Описание |
|------|----------|
| `name` | название отеля |
| `stars` | звездность отеля (цифра) |
| `region` | название курорта |
| `regioncode` | код курорта |
| `country` | название страны |
| `countrycode` | код страны |
| `rating` | рейтинг отеля |
| `placement` | местоположение отеля |
| `phone` | телефон отеля |
| `site` | сайт |
| `build` | год постройки отеля |
| `repair` | год последнего ремонта в отеле |
| `square` | площадь отеля |
| `description` | описание отеля |
| `territory` | инфраструктура отеля (что находится на территории) |
| `inroom` | описания стандартного номера (что находится в номере) |
| `roomtypes` | типы номеров (список) |
| `services` | список услуг в отеле |
| `servicefree` | список бесплатных услуг в отеле |
| `servicepay` | список платных услуг в отеле |
| `animation` | развлечения (анимация) в отеле |
| `child` | услуги для детей |
| `beach` | описание пляжа |
| `meallist` | список типов питания в отеле |
| `mealtypes` | описание питания |
| `registrynumber` | номер отеля в реестре (для отелей РФ) |
| `registrylink` | ссылка на отель в реестре (для отелей РФ) |

### Фотографии

| Поле | Описание |
|------|----------|
| `images` | список ссылок на фотографии отеля |
| `imagescount` | количество фотографий отеля |

### Координаты (если есть)

| Поле | Описание |
|------|----------|
| `coord1` | координата 1 (Latitude) |
| `coord2` | координата 2 (Longitude) |

---

## 5. Фотографии отеля

В теге `images` содержится набор элементов `image`, каждый из которых содержит ссылку на фотографию отеля.

Ширина фотографий (или высота, если фотография ориентирована вертикально) = **800 пикселей** (если доступно), либо **400 пикселей**. Основная масса фотографий уже доступна в качестве 800 пикс, в будущем планируется все фото отелей перевести на качество 800 пикс.

> **ВАЖНО!** Допускается вставка на Ваш сайт только фотографий, которые загружаются с наших серверов по указанным в шлюзе ссылкам. Т.е. если Вы вставляете теги IMG и указываете в атрибуте SRC ссылку, которую получили из шлюза, то в этом случае фотография отобразится корректно.
>
> **Запрещается загружать фотографии на Ваши сервера!**

---

## 6. Отзывы по отелю

Если в запросе добавлен параметр `reviews=1`, то в теге `reviews` будет передан набор отзывов по данному отелю (если по отелю есть отзывы в нашей системе). Передаются последние **5 отзывов**.

> **Важно!** Используйте данный параметр только если Вам действительно нужны отзывы! Отзывы достаточно объемные и их включение сильно увеличивает размер и время ответа сервера.

### Структура отзыва

Отзывы представлены в виде массива элементов `review`, каждый из которых содержит несколько полей:

| Поле | Описание |
|------|----------|
| `Name` | имя туриста, который оставил отзыв |
| `Content` | содержание (основной текст) отзыва |
| `Positive` | плюсы (положительные стороны) отеля, если есть |
| `Negative` | минусы (отрицательные стороны) отеля, если есть |
| `Traveltime` | время поездки в отель (обычно месяц и год) |
| `Rate` | как турист оценил отель (от 1 до 5) |
| `Reviewdate` | дата публикации отзыва |
| `Reviewtime` | время публикации отзыва |
| `Sourcelink` | ссылка на источник отзыва – очень важно ее публиковать – см.ниже |

Часть полей могут быть пустыми.

### Важная информация об отзывах

> **ВАЖНО!** Мы получаем отзывы от наших партнеров – порталов tury.ru, otzyv.ru, votpusk.ru (список партнеров может быть увеличен или уменьшен).
>
> В поле `sourcelink` передается ссылка на исходный текст отзыва на сайте соответствующего партнера. **По соглашению с партнерами необходимо при публикации отзыва размещать рядом ссылку**, так, чтобы клиент смог перейти по ссылке на исходный отзыв.
>
> Например, это можно сделать так: «Отзыв предоставлен порталом tury.ru» и ссылка ведет на отзыв.
>
> В случае, если Вы не разместите соответствующую ссылку на сайт партнера при публикации отзыва, мы не несем ответственности за любые претензии соответствующих порталов в Ваш адрес.

**Пример размещения ссылки:**

```
http://manyhotels.ru/#!/hotel=absolute-patong-ville&showreviews=1&review_id=38616
```
